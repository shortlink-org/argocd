argo-redis:
  extends: .matrix_deploy_provider
  stage: deploy
  variables:
    PROVIDER: $PROVIDER
    RELEASE_NAME: argo-redis
    HELM_PATH: Helm/argo-redis
    HELM_NAMESPACE: argocd
    ENVIRONMENT_URL: https://argo.${ENVIRONMENT_URL}
  trigger:
    include:
      - component: $CI_SERVER_FQDN/shortlink-org/gitlab-templates/helm_deploy@main
    strategy: depend
  needs: []
  rules:
    - when: manual

argo-cd:
  extends: .matrix_deploy_provider
  stage: deploy
  variables:
    PROVIDER: $PROVIDER
    RELEASE_NAME: argocd
    HELM_PATH: Helm/argocd
    HELM_NAMESPACE: argocd
    ENVIRONMENT_URL: https://argo.${ENVIRONMENT_URL}
    HELM_ARG: -f ${HELM_PATH}/values.sops.yaml
  trigger:
    include:
      - component: $CI_SERVER_FQDN/shortlink-org/gitlab-templates/helm_deploy@main
    strategy: depend
  needs: []
  rules:
    - when: manual
